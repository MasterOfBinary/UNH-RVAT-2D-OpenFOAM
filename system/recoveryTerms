/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  2.4.x                                 |
|   \\  /    A nd           | Web:      www.OpenFOAM.org                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/


    recoveryTerms
    {
        functionObjectLibs ("libutilityFunctionObjects.so");
        type coded;
        // Name of on-the-fly generated functionObject
        redirectType writeRecoveryTerms;
        code
        #{
            const volVectorField& UMean
                = mesh().lookupObject<volVectorField>("UMean");
            const volScalarField UMeanx = UMean.component(0);
            const volScalarField& pMean
                = mesh().lookupObject<volScalarField>("pMean");
            
            volVectorField gradPMean = fvc::grad(pMean);
            
            volScalarField gradPMeanx
            (
                IOobject
                (
                    "gradPMeanx",
                    mesh().time().timeName(),
                    mesh(),
                    IOobject::NO_READ,
                    IOobject::AUTO_WRITE
                ),
                gradPMean.component(0)
            );
            
            volVectorField gradUMeanx
            (
                IOobject
                (
                    "gradUMeanx",
                    mesh().time().timeName(),
                    mesh(),
                    IOobject::NO_READ,
                    IOobject::AUTO_WRITE
                ),
                fvc::grad(UMeanx)
            );

            volScalarField laplacianUMeanx
            (
                IOobject
                (
                    "laplacianUMeanx",
                    mesh().time().timeName(),
                    mesh(),
                    IOobject::NO_READ,
                    IOobject::AUTO_WRITE
                ),
                fvc::laplacian(UMeanx)
            );

            gradPMeanx.write();
            gradUMeanx.write();
            laplacianUMeanx.write();
        #};
    }

// ************************************************************************* //
